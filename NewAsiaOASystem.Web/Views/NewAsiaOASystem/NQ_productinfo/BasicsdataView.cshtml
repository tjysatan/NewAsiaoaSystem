@{
    ViewBag.Title = "基础数据更新";
    Layout = "~/Views/Shared/_SysLayout.cshtml";
}

<div style="width: 80%; padding: 20px 20px 0 20px">
    <div class="layui-form-item">
        <div class="layui-input-block">
            <button class="layui-btn" lay-submit lay-filter="formDemo" onclick="return tjUpdatedate()">更新数据</button>
            <button class="layui-btn" lay-submit lay-filter="formDemo" onclick="return Updatek3date()">新增数据</button>
        </div>
    </div>
</div>


<script type="text/javascript">
    var loadi;
    function ddchen() {
        loadi = layer.load(1, { shade: [0.8, '#393D49'] })
    }
    //关闭等待效果
    function disLoading() {
        layer.close(loadi);
    }

    function tjUpdatedate() {
        $.ajax({
            url: "../NQ_productinfo/Updatecpdata",
            type: "POST",
            dataType: "html",
            async: true,
            beforeSend: function () {
                ddchen();
            },
            success: function (response) {
                disLoading();
                layer.alert("本次更新：" + response + "条数据", { icon: 1 });
            },
            error: function (e) {
                disLoading();
                layer.alert("操作失败！", { icon: 2 });
            }
        })
    }

    //新增同步
    function Updatek3date() {
        $.ajax({
            url: "../NQ_productinfo/Updatek3date",
            type: "POST",
            dataType: "html",
            async: true,
            beforeSend: function () {
                ddchen();
            },
            success: function (response) {
                disLoading();
                layer.alert("本次新增：" + response + "条数据", { icon: 1 });
            },
            error: function (e) {
                disLoading();
                layer.alert("操作失败！", { icon: 2 });
            }
        })
    }
</script>
